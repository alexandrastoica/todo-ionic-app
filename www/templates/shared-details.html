<ion-view view-title="Shared Lists" name="shared-view">
    <div class="bar bar-subheader" ng-repeat="(key, list) in lists | filter: {listId: whichList}">
      <h2 class="title">{{ list.name }}</h2>
    </div>
    <ion-content class="padding has-header has-subheader" ng-repeat="(key, list) in lists | filter: {listId: whichList}">
        <h5>Owner: {{ author }}</h5>
        <p ng-show="shares.length">Shared with:</p>
        <p ng-repeat="shared in shares" ng-show="shares.length">{{ shared }}</p>
        <ion-list>
            <ion-item class="item item-divider">Tasks</ion-item>
            <ion-checkbox ng-repeat="(key, task) in tasks | filter: {done: 0} as notDone" ng-click="completeTask(task.$id)">
                {{ task.name }}
            </ion-checkbox>
            <ion-item ng-show="notDone.length===0" class="assertive">No tasks</ion-item>
        </ion-list>

        <ion-list>
            <ion-item class="item item-divider">Completed Tasks</ion-item>
            <ion-item ng-repeat="(key, task) in tasks | filter: {done: 1} as done">
                {{ task.name }}
            </ion-item>
            <ion-item ng-show="done.length===0" class="assertive">Nothing completed</ion-item>
        </ion-list>
        <button class="button button-block button-positive" ng-click="addTask()">Add Task</button>
        <button ng-if="list.by == currentUser.$id" class="button button-block button-assertive" ng-click="deleteSharedList(key, list.listId)">Delete List</button>
    </ion-content>
</ion-view>